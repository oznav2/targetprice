# מחשבון מחיר דירה - פרויקט מחיר מטרה

![Application Preview](prev.png)

אפליקציה מתקדמת לחישוב מחיר דירות בפרויקטים של "מחיר מטרה" לפי הנוסחאות הרשמיות של משרד השיכון. המערכת תומכת בכל סוגי הפרויקטים ומבוססת על 3 מחשבונים רשמיים של משרד השיכון.

## ✨ תכונות מתקדמות

### 🎯 תמיכה ב-3 סוגי פרויקטים
- **מחיר מטרה 2.0** (אלקין) - פרויקטים עד יולי 2023
- **מחיר מטרה 3.0** (גולדנקנופף) - פרויקטים מאוגוסט 2023 ואילך
- **מחיר למשתכן/מחיר מופחת** - פרויקטי מחיר קבוע

### 🏗️ חישובים מדויקים
- **חישוב מרפסת בדרגות**: 0-30 מ"ר (30%), 30-60 מ"ר (20%), 60-120 מ"ר (10%)
- **תמיכה במחסן**: מקדם 40% (כמו בנוסחאות הרשמיות)
- **חישוב קומות**: התאמת מחיר לפי קומה בבניינים רבי קומות (מעל 10 קומות)
- **מקדם הצמדה**: תמיכה במקדם ההצמדה להגבלת ההנחה (מחיר מטרה 2.0)

### 🔄 לוגיקת הנחות מתקדמת
- **מחיר מטרה 2.0**: 20% או 300,000 ₪ (הנמוך מבין השניים)
- **מחיר מטרה 3.0**: 25% או 600,000 ₪ (הנמוך מבין השניים)
- **בדיקת מחיר בסיס**: המחיר לא יעלה על מחיר דצמבר 2020 ללא הנחה

### 🎨 ממשק משתמש
- ממשק משתמש פשוט ונוח בעברית
- בחירת סוג פרויקט דינמית
- הצגת פירוט מלא של כל שלבי החישוב
- תצוגת חיסכון וחישוב לפי קומה

## נוסחת החישוב

המחיר מחושב לפי המשקלות הבאות:
- **שטח דירה**: 100% (מקדם 1.0)
- **מרפסת**: 30% (מקדם 0.3) - עד 30 מ"ר
- **גינה**: 40% (מקדם 0.4)
- **חניה**: 200% (מקדם 2.0) - כל מקום חניה

### שלבי החישוב:
1. חישוב שטח משוקלל
2. מחיר בסיסי = מחיר בסיסי למ"ר × שטח משוקלל
3. מחיר עדכני = מחיר עדכני למ"ר × שטח משוקלל  
4. מחיר עם הנחה = מחיר בסיסי × 0.75
5. בדיקת הפרש מקסימלי (600,000 ₪)
6. קביעת מחיר סופי

## התקנה והפעלה

### דרישות מקדימות
- Python 3.8 ומעלה
- pip (מנהל החבילות של Python)

### שלבי ההתקנה:

1. **הורדת הקבצים**
   ```bash
   # צרו תיקייה חדשה לפרויקט
   mkdir target-price-calc
   cd target-price-calc
   ```

2. **יצירת סביבה וירטואלית (מומלץ)**
   ```bash
   python -m venv .venv
   
   # הפעלה בWindows:
   .venv\Scripts\activate
   
   # הפעלה במק/לינוקס:
   source .venv/bin/activate
   ```

3. **התקנת תלויות FastAPI**
   ```bash
   pip install fastapi uvicorn python-multipart
   ```

4. **מבנה התיקיות**
   ```
   target-price-calc/
   ├── app.py
   ├── templates/
   │   └── index.html
   ├── .gitignore
   └── README.md
   ```

5. **הפעלת השרת FastAPI**
   ```bash
   # הפעלה עם uvicorn
   uvicorn app:app --host 0.0.0.0 --port 8181 --reload
   
   # או הפעלה ישירה
   python app.py
   ```

6. **פתיחת הדפדפן**
   - גשו לכתובת: http://localhost:8181
   - האפליקציה תיפתח עם דוגמה טעונה מראש
   - תיעוד API אוטומטי זמין ב: http://localhost:8181/docs

## שימוש באפליקציה

1. **הזינו את הנתונים:**
   - שטח הדירה במ"ר
   - שטח המרפסת במ"ר (אופציונלי)
   - שטח הגינה במ"ר (אופציונלי) 
   - מספר מקומות חניה
   - מחיר בסיסי למ"ר (מהפרויקט)
   - מחיר עדכני למ"ר (מהפרויקט)

2. **לחצו על "חשב מחיר דירה"**

3. **צפו בתוצאות:**
   - מחיר סופי של הדירה
   - חיסכון לעומת מחיר השוק
   - פירוט מלא של החישוב

## דוגמה

הדוגמה הטעונה מראש מהקובץ המקורי:
- שטח דירה: 100 מ"ר
- מרפסת: 12 מ"ר  
- גינה: 8 מ"ר
- חניות: 1
- מחיר בסיסי: 13,808 ₪/מ"ר
- מחיר עדכני: 18,201 ₪/מ"ר

**תוצאה צפויה: 1,380,268 ₪**

## תכונות FastAPI

- **ביצועים גבוהים**: FastAPI מבוסס על Starlette ו-Pydantic לביצועים מעולים
- **תיעוד אוטומטי**: API docs זמין ב-/docs ו-/redoc
- **אימות נתונים**: אימות אוטומטי של נתוני הקלט
- **תמיכה אסינכרונית**: תמיכה מלאה בפעולות async/await

## פתרון בעיות

### האפליקציה לא נפתחת
- ודאו ש-Python מותקן: `python --version`
- ודאו ש-FastAPI מותקן: `pip show fastapi`
- ודאו ש-Uvicorn מותקן: `pip show uvicorn`
- בדקו שהפורט 8181 פנוי

### שגיאות חישוב
- ודאו שכל השדות מכילים מספרים חיוביים
- ודאו שמחיר למ"ר גדול מ-0

### בעיות תצוגה
- רעננו את הדף (F5)
- נסו דפדפן אחר
- ודאו שיש חיבור לאינטרנט (עבור Bootstrap)
- בדקו את לוגי השרת בטרמינל

### API Testing
- גשו ל-http://localhost:8181/docs לתיעוד אינטראקטיבי
- בדקו את endpoint ה-/calculate ישירות
- השתמשו ב-curl לבדיקת API:
  ```bash
  curl -X POST "http://localhost:8181/calculate" \
       -H "Content-Type: application/json" \
       -d '{"apartment_area": 100, "balcony_area": 12, "garden_area": 8, "parking_spots": 1, "base_price_per_sqm": 13808, "current_price_per_sqm": 18201}'
  ```

## רישיון

פרויקט זה נועד לעזרה בחישובים בלבד ואינו מהווה ייעוץ משפטי או פיננסי.